!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.createFractionalDelay=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=function(a,b){"use strict";var c={delayTime:{writable:!0,value:0},maxdelayTime:{writable:!0,value:1},posRead:{writable:!0,value:0},posWrite:{writable:!0,value:0},fracXi1:{writable:!0,value:0},fracXi2:{writable:!0,value:0},fracYi1:{writable:!0,value:0},intDelay:{writable:!0,value:0},fracDelay:{writable:!0,value:0},sampleRate:{writable:!0},buffer:{writable:!0},bufferSize:{writable:!0},a1:{writable:!0},init:{enumerable:!0,value:function(a,b){return this.sampleRate=a,this.maxDelayTime=b||this.maxDelayTime,this.bufferSize=this.maxDelayTime*this.sampleRate,this.bufferSize%1!==0&&(this.bufferSize=parseInt(this.bufferSize)+1),this.buffer=new Float32Array(this.bufferSize),this}},setDelay:{enumerable:!0,value:function(a){if(a<this.maxDelayTime){this.delayTime=a;var b=a*this.sampleRate;this.intDelay=parseInt(b),this.fracDelay=b-this.intDelay,this.resample(),0!==this.fracDelay&&this.updateThiranCoefficient()}else console.log("throw error...how?")}},getDelay:{enumerable:!0,value:function(){return this.delayTime}},process:{enumerable:!0,value:function(a){for(var b=new Float32Array(a.length),c=0;c<a.length;c+=1)this.buffer[this.posWrite]=a[c],b[c]=this.buffer[this.posRead],this.updatePointers();return 0===this.fracDelay?b:b=new Float32Array(this.fractionalThiranProcess(b))}},updatePointers:{enumerable:!1,value:function(){this.posWrite=this.posWrite===this.buffer.length-1?0:this.posWrite+1,this.posRead=this.posRead===this.buffer.length-1?0:this.posRead+1}},updateThiranCoefficient:{enumerable:!1,value:function(){this.a1=(1-this.fracDelay)/(1+this.fracDelay)}},resample:{enumerable:!1,value:function(){if(this.posWrite-this.intDelay<0){var a=this.intDelay-this.posWrite;this.posRead=this.buffer.length-a}else this.posRead=this.posWrite-this.intDelay}},fractionalThiranProcess:{enumerable:!1,value:function(a){for(var b,c,d=new Float32Array(a.length),e=this.fracXi1,f=this.fracXi2,g=this.fracYi1,h=0;h<a.length;h+=1)b=a[h],c=this.a1*b+e-this.a1*g,e=b,g=c,d[h]=c;return this.fracXi1=e,this.fracXi2=f,this.fracYi1=g,d}}},d=Object.create({},c);return d.init(a,b)};b.exports=c},{}]},{},[1])(1)});