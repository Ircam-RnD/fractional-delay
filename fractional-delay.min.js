!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.FractionalDelay=e()}}(function(){return function e(t,i,r){function s(n,o){if(!i[n]){if(!t[n]){var f="function"==typeof require&&require;if(!o&&f)return f(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[n]={exports:{}};t[n][0].call(u.exports,function(e){var i=t[n][1][e];return s(i?i:e)},u,u.exports,e,t,i,r)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<r.length;n++)s(r[n]);return s}({1:[function(e,t,i){"use strict";var r=e("babel-runtime/helpers/create-class")["default"],s=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(t,i){s(this,e),this.delayTime=0,this.posRead=0,this.posWrite=0,this.fracXi1=0,this.fracYi1=0,this.intDelay=0,this.fracDelay=0,this.a1=void 0,this.sampleRate=t,this.maxDelayTime=i||1,this.bufferSize=this.maxDelayTime*this.sampleRate,this.bufferSize%1!==0&&(this.bufferSize=parseInt(this.bufferSize)+1),this.buffer=new Float32Array(this.bufferSize)}return r(e,[{key:"setDelay",value:function(e){if(!(e<this.maxDelayTime))throw new Error("delayTime > maxDelayTime");this.delayTime=e;var t=e*this.sampleRate;this.intDelay=parseInt(t),this.fracDelay=t-this.intDelay,this.resample(),0!==this.fracDelay&&this.updateThiranCoefficient()}},{key:"getDelay",value:function(){return this.delayTime}},{key:"process",value:function(e){for(var t=new Float32Array(e.length),i=0;i<e.length;i+=1)this.buffer[this.posWrite]=e[i],t[i]=this.buffer[this.posRead],this.updatePointers();return 0===this.fracDelay?t:t=new Float32Array(this.fractionalThiranProcess(t))}},{key:"updatePointers",value:function(){this.posWrite===this.buffer.length-1?this.posWrite=0:this.posWrite=this.posWrite+1,this.posRead===this.buffer.length-1?this.posRead=0:this.posRead=this.posRead+1}},{key:"updateThiranCoefficient",value:function(){this.a1=(1-this.fracDelay)/(1+this.fracDelay)}},{key:"resample",value:function(){if(this.posWrite-this.intDelay<0){var e=this.intDelay-this.posWrite;this.posRead=this.buffer.length-e}else this.posRead=this.posWrite-this.intDelay}},{key:"fractionalThiranProcess",value:function(e){for(var t,i,r=new Float32Array(e.length),s=this.fracXi1,a=this.fracYi1,n=0;n<e.length;n+=1)t=e[n],i=this.a1*t+s-this.a1*a,s=t,a=i,r[n]=i;return this.fracXi1=s,this.fracYi1=a,r}}]),e}();i["default"]=a,t.exports=i["default"]},{"babel-runtime/helpers/class-call-check":4,"babel-runtime/helpers/create-class":5}],2:[function(e,t,i){t.exports=e("./dist/fractional-delay")},{"./dist/fractional-delay":1}],3:[function(e,t,i){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":6}],4:[function(e,t,i){"use strict";i["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i.__esModule=!0},{}],5:[function(e,t,i){"use strict";var r=e("babel-runtime/core-js/object/define-property")["default"];i["default"]=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),r(e,s.key,s)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),i.__esModule=!0},{"babel-runtime/core-js/object/define-property":3}],6:[function(e,t,i){var r=e("../../modules/$");t.exports=function(e,t,i){return r.setDesc(e,t,i)}},{"../../modules/$":7}],7:[function(e,t,i){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},{}]},{},[2])(2)});